import{a as p,i as R,g as W,b as K,o as G,c as Y,d as I,s as J,e as Q,f as V,h as X}from"./vendor-d66298c3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();p.defaults.baseURL="https://books-backend.p.goit.global/books/";async function M(){const e=await p.get("category-list").then(t=>t.data);return console.log("список категорій",e),e}M();async function z(){const e=await p.get("top-books").then(t=>t.data);return console.log("топ 5 в кожній категорії",e),e}z();async function q(e){const t=await p.get(`category?category=${e}`).then(o=>o.data);return console.log("книги з вибраної категорії",t),t}q("Childrens Middle Grade Hardcover");async function Z(e){const t=await p.get(`${e}`).then(o=>o.data);return console.log("вибрана книга",t),t}Z("643282b1e85766588626a0dc");const ee={apiKey:"AIzaSyCSIOIvaBcm09OifpCpfKPAwnfy_t377rM",authDomain:"testfirebase-422a2.firebaseapp.com",databaseURL:"https://testfirebase-422a2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"testfirebase-422a2",storageBucket:"testfirebase-422a2.appspot.com",messagingSenderId:"589688307018",appId:"1:589688307018:web:e010a81c7decb75d56d5b3"},x=R(ee),O=W(x),d=K(x),te=async(e,t)=>Y(d,e,t),se=async e=>{const t=I(O,"users",d.currentUser.uid);return J(t,{name:e})},oe=async(e,t)=>Q(d,e,t),ae=async()=>(await d._initializationPromise,d.currentUser!==null),ne=async()=>{const e=d.currentUser;return V(e)},H=async()=>X(I(O,"users",d.currentUser.uid));function re(){G(d,e=>e?(console.log("User is signed in"),!0):(console.log("User is signed out"),!1))}const ce=document.querySelector(".menu-auth"),ie=document.querySelector(".auth-modal"),P=document.querySelector(".menu-username"),j=document.querySelector(".menu-auth-logo"),le=async()=>{await ae()&&H().then(t=>{b(t.data().name)})};re();function de(){P.textContent="Sign In",j.classList.add("visually-hidden"),le()}ce.addEventListener("click",()=>{ie.classList.remove("visually-hidden"),he(),me()});const b=e=>{P.textContent=e,j.classList.remove("visually-hidden")};de();const m=document.querySelector(".auth-modal"),B=document.querySelector(".auth-close-btn"),ue=document.querySelector(".auth-form"),h=document.querySelector(".auth-toggler-sign-up"),g=document.querySelector(".auth-toggler-sign-in"),L=document.querySelector("#auth-name"),T=document.querySelector("#auth-email"),$=document.querySelector("#auth-password"),f=document.querySelector(".auth-sign-up"),y=document.querySelector(".auth-sign-in");document.querySelector("auth-logged-container");function me(){function e(){B.removeEventListener("click",t),document.removeEventListener("click",o),document.removeEventListener("keydown",r),h.removeEventListener("click",s),g.removeEventListener("click",n),y.removeEventListener("click",A),f.removeEventListener("click",C)}function t(){m.classList.add("visually-hidden"),e()}B.addEventListener("click",t);const o=a=>{!a.composedPath().includes(ue)&&a.composedPath().includes(m)&&(m.classList.add("visually-hidden"),e())};document.addEventListener("click",o);const r=a=>{a.key=="Escape"&&(m.classList.add("visually-hidden"),e())};document.addEventListener("keydown",r);const s=()=>{g.classList.remove("auth-toggler-active"),h.classList.add("auth-toggler-active"),L.classList.remove("visually-hidden"),f.classList.remove("visually-hidden"),y.classList.add("visually-hidden")};h.addEventListener("click",s);const n=()=>{h.classList.remove("auth-toggler-active"),g.classList.add("auth-toggler-active"),L.classList.add("visually-hidden"),f.classList.add("visually-hidden"),y.classList.remove("visually-hidden")};g.addEventListener("click",n);function u(a){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(a).toLowerCase())}const D=async(a,i)=>{oe(a,i).then(()=>{H().then(c=>{b(c.data().name),m.classList.add("visually-hidden"),e()}).catch(c=>{alert(`Get user name error: ${c.code}`)})}).catch(c=>{alert(`Authorization error: ${c.code}`)})},A=()=>{const a=T.value.trim(),i=$.value.trim();u(a)?i.length>=5?D(a,i):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};y.addEventListener("click",A);const F=async(a,i,c)=>{te(a,i).then(()=>{se(c).then(()=>{b(c),m.classList.add("visually-hidden"),e()}).catch(k=>{alert(`Create account error: ${k.code}`),ne().then(()=>{}).catch(_=>{alert(`Create account error: ${_.code}`)})})}).catch(k=>{alert(`Create account error: ${k.code}`)})},C=()=>{const a=T.value.trim(),i=$.value.trim(),c=L.value.trim();u(a)?i.length>=5?c.length>0&&F(a,i,c):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};f.addEventListener("click",C)}function he(){h.classList.remove(".auth-toggler-active"),g.classList.add(".auth-toggler-active"),L.classList.add("visually-hidden"),f.classList.add("visually-hidden"),y.classList.remove("visually-hidden")}const w=document.querySelector("#scrollToTopButton");window.addEventListener("scroll",()=>{window.pageYOffset>500?w.classList.add("show"):w.classList.remove("show")});w.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const E=document.querySelector(".main-categories-list");M().then(e=>{const t=e.data.map(o=>`<li class="main-categories-list-item">${o.list_name}</li>`).join("");E.innerHTML='<li class="main-categories-list-item main-categories-list-item-active">All categories</li>'+t});E.addEventListener("click",e=>{if(e.target.classList.contains("main-categories-list-item")){for(const t of E.children)t.classList.remove("main-categories-list-item-active");e.target.classList.add("main-categories-list-item-active"),e.target.textContent==="All categories"?z().then(t=>{fromTopBlocks(t)}):q(e.target.textContent).then(t=>{fromSelectedBlocks(t,e.target.textContent)})}});const U={categoryTitle:document.querySelector(".js-category-title"),categoryBox:document.querySelector(".js-category-box")};async function ge(e){try{const t=await q(e),o=pe(t),r=ye(e);U.categoryBox.insertAdjacentHTML("afterbegin",o),U.categoryTitle.innerHTML=r}catch(t){console.log(t)}}ge("Hardcover Fiction");U.categoryBox.addEventListener("click",fe);function fe(e){if(e.target===e.currentTarget)return;const o=e.target.closest(".card-wrapper").dataset.id;return console.dir(o),o}function ye(e){const t=e.split(" "),o=Math.ceil(t.length/2),r=t.slice(0,o).join(" "),s=t.slice(o).join(" ");return`
        ${r} <span class="second-half">${s}</span>
    `}function pe(e){return e.map(({author:t,title:o,book_image:r,_id:s})=>`<li class="card-wrapper" data-id="${s}">
                   <div class="book-img">
                      <img src="${r}" alt="${o}">
                   </div>
                   <h2 class="book-title">${o}</h2>
                   <p class="book-author">${t}</p>
                </li>
   `).join("")}const Le=document.querySelector(".main-support-scroll"),S=document.querySelector(".main-support-list");Le.addEventListener("click",()=>{let e=[...S.children].slice(0,1);S.firstChild.remove(),S.appendChild(e[0])});const v=document.querySelector("body"),ve=document.querySelector(".btn"),l=document.querySelector(".btn__icon");function N(e){localStorage.setItem("darkmode",e)}function ke(){const e=localStorage.getItem("darkmode");e?e=="true"?(v.classList.add("darkmode"),l.classList.add("fa-moon")):e=="false"&&l.classList.add("fa-sun"):(N(!1),l.classList.add("fa-sun"))}ke();ve.addEventListener("click",function(){v.classList.toggle("darkmode"),l.classList.add("animated"),N(v.classList.contains("darkmode")),v.classList.contains("darkmode")?(l.classList.remove("fa-sun"),l.classList.add("fa-moon")):(l.classList.remove("fa-moon"),l.classList.add("fa-sun")),setTimeout(function(){l.classList.remove("animated")},500)});
//# sourceMappingURL=theme-dark-light-5b92e39a.js.map
