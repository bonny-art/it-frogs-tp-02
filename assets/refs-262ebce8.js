import{a as f,i as B,g as N,b as M,o as F,c as x,d as A,s as D,e as R,f as T,h as W}from"./vendor-c21e0a22.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function c(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(s){if(s.ep)return;s.ep=!0;const n=c(s);fetch(s.href,n)}})();f.defaults.baseURL="https://books-backend.p.goit.global/books/";async function _(){const e=await f.get("category-list").then(t=>t.data);return console.log("список категорій",e),e}_();async function j(){const e=await f.get("top-books").then(t=>t.data);return console.log("топ 5 в кожній категорії",e),e}j();async function H(e){const t=await f.get(`category?category=${e}`).then(c=>c.data);return console.log("книги з вибраної категорії",t),t}H("Childrens Middle Grade Hardcover");async function K(e){const t=await f.get(`${e}`).then(c=>c.data);return console.log("вибрана книга",t),t}K("643282b1e85766588626a0dc");const G={apiKey:"AIzaSyCSIOIvaBcm09OifpCpfKPAwnfy_t377rM",authDomain:"testfirebase-422a2.firebaseapp.com",databaseURL:"https://testfirebase-422a2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"testfirebase-422a2",storageBucket:"testfirebase-422a2.appspot.com",messagingSenderId:"589688307018",appId:"1:589688307018:web:e010a81c7decb75d56d5b3"},E=B(G),q=N(E),i=M(E),J=async(e,t)=>x(i,e,t),Q=async e=>{const t=A(q,"users",i.currentUser.uid);return D(t,{name:e})},V=async(e,t)=>R(i,e,t),X=async()=>(await i._initializationPromise,i.currentUser!==null),Y=async()=>{const e=i.currentUser;return T(e)},C=async()=>W(A(q,"users",i.currentUser.uid));function Z(){F(i,e=>e?(console.log("User is signed in"),!0):(console.log("User is signed out"),!1))}const ee=document.querySelector(".menu-auth"),te=document.querySelector(".auth-modal"),I=document.querySelector(".menu-username"),z=document.querySelector(".menu-auth-logo"),se=async()=>{await X()&&C().then(t=>{L(t.data().name)})};Z();function ae(){I.textContent="Sign In",z.classList.add("visually-hidden"),se()}ee.addEventListener("click",()=>{te.classList.remove("visually-hidden"),re(),oe()});const L=e=>{I.textContent=e,z.classList.remove("visually-hidden")};ae();const d=document.querySelector(".auth-modal"),b=document.querySelector(".auth-close-btn"),ne=document.querySelector(".auth-form"),h=document.querySelector(".auth-toggler-sign-up"),m=document.querySelector(".auth-toggler-sign-in"),v=document.querySelector("#auth-name"),w=document.querySelector("#auth-email"),U=document.querySelector("#auth-password"),g=document.querySelector(".auth-sign-up"),y=document.querySelector(".auth-sign-in");document.querySelector("auth-logged-container");function oe(){function e(){b.removeEventListener("click",t),document.removeEventListener("click",c),document.removeEventListener("keydown",u),h.removeEventListener("click",s),m.removeEventListener("click",n),y.removeEventListener("click",S),g.removeEventListener("click",k)}function t(){d.classList.add("visually-hidden"),e()}b.addEventListener("click",t);const c=a=>{!a.composedPath().includes(ne)&&a.composedPath().includes(d)&&(d.classList.add("visually-hidden"),e())};document.addEventListener("click",c);const u=a=>{a.key=="Escape"&&(d.classList.add("visually-hidden"),e())};document.addEventListener("keydown",u);const s=()=>{m.classList.remove("auth-toggler-active"),h.classList.add("auth-toggler-active"),v.classList.remove("visually-hidden"),g.classList.remove("visually-hidden"),y.classList.add("visually-hidden")};h.addEventListener("click",s);const n=()=>{h.classList.remove("auth-toggler-active"),m.classList.add("auth-toggler-active"),v.classList.add("visually-hidden"),g.classList.add("visually-hidden"),y.classList.remove("visually-hidden")};m.addEventListener("click",n);function l(a){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(a).toLowerCase())}const $=async(a,r)=>{V(a,r).then(()=>{C().then(o=>{L(o.data().name),d.classList.add("visually-hidden"),e()}).catch(o=>{alert(`Get user name error: ${o.code}`)})}).catch(o=>{alert(`Authorization error: ${o.code}`)})},S=()=>{const a=w.value.trim(),r=U.value.trim();l(a)?r.length>=5?$(a,r):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};y.addEventListener("click",S);const O=async(a,r,o)=>{J(a,r).then(()=>{Q(o).then(()=>{L(o),d.classList.add("visually-hidden"),e()}).catch(p=>{alert(`Create account error: ${p.code}`),Y().then(()=>{}).catch(P=>{alert(`Create account error: ${P.code}`)})})}).catch(p=>{alert(`Create account error: ${p.code}`)})},k=()=>{const a=w.value.trim(),r=U.value.trim(),o=v.value.trim();l(a)?r.length>=5?o.length>0&&O(a,r,o):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};g.addEventListener("click",k)}function re(){h.classList.remove(".auth-toggler-active"),m.classList.add(".auth-toggler-active"),v.classList.add("visually-hidden"),g.classList.add("visually-hidden"),y.classList.remove("visually-hidden")}document.querySelector(".js-category-title"),document.querySelector(".js-category-box");
//# sourceMappingURL=refs-262ebce8.js.map
