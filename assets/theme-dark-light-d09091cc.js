import{a as y,i as _,g as W,b as R,c as K,d as M,e as G,s as Y,f as J,h as Q}from"./vendor-b82aaa89.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();y.defaults.baseURL="https://books-backend.p.goit.global/books/";async function z(){const e=await y.get("category-list").then(t=>t.data);return console.log("список категорій",e),e}z();async function O(){const e=await y.get("top-books").then(t=>t.data);return console.log("топ 5 в кожній категорії",e),e}O();async function $(e){const t=await y.get(`category?category=${e}`).then(o=>o.data);return console.log("книги з вибраної категорії",t),t}$("Childrens Middle Grade Hardcover");async function j(e){const t=await y.get(`${e}`).then(o=>o.data);return console.log("вибрана книга",t),t}j("643282b1e85766588626a0dc");const V={apiKey:"AIzaSyCSIOIvaBcm09OifpCpfKPAwnfy_t377rM",authDomain:"testfirebase-422a2.firebaseapp.com",databaseURL:"https://testfirebase-422a2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"testfirebase-422a2",storageBucket:"testfirebase-422a2.appspot.com",messagingSenderId:"589688307018",appId:"1:589688307018:web:e010a81c7decb75d56d5b3"},x=_(V),H=W(x),u=R(x),X=async(e,t)=>G(u,e,t),Z=async e=>{const t=M(H,"users",u.currentUser.uid);return Y(t,{name:e})},ee=async(e,t)=>J(u,e,t),te=async()=>(await u._initializationPromise,u.currentUser!==null),oe=async()=>{const e=u.currentUser;return Q(e)},P=async()=>K(M(H,"users",u.currentUser.uid));document.addEventListener("DOMContentLoaded",function(){let e=window.location.href;document.querySelectorAll(".nav-item").forEach(function(o){o.querySelector("a").href===e&&o.classList.add("active-page")}),ce().then(o=>{console.log(o);let a=document.querySelector(".menu-auth-icon use"),s=document.querySelector(".auth-link");o?(a.setAttribute("href","/images/header/header-defs.svg#icon-fi-ss-caret-down-1"),s.classList.remove("visually-hidden")):(a.setAttribute("href","/images/header/header-defs.svg#icon-arrow-narrow-right-1"),s.classList.add("visually-hidden"))})});const se=document.querySelector(".menu-auth"),ae=document.querySelector(".auth-modal"),ne=document.querySelector(".menu-username"),re=document.querySelector(".menu-auth-logo");async function ce(){const e=await te();return console.log(e),e&&P().then(t=>{w(t.data().name)}),e}se.addEventListener("click",()=>{ae.classList.remove("visually-hidden"),de(),le()});const w=e=>{ne.textContent=e,re.classList.remove("visually-hidden")},m=document.querySelector(".auth-modal"),C=document.querySelector(".auth-close-btn"),ie=document.querySelector(".auth-container"),h=document.querySelector(".auth-toggler-sign-up"),g=document.querySelector(".auth-toggler-sign-in"),L=document.querySelector("#auth-name"),T=document.querySelector("#auth-email"),I=document.querySelector("#auth-password"),f=document.querySelector(".auth-sign-up"),p=document.querySelector(".auth-sign-in");document.querySelector("auth-logged-container");function le(){function e(){C.removeEventListener("click",t),document.removeEventListener("click",o),document.removeEventListener("keydown",a),h.removeEventListener("click",s),g.removeEventListener("click",n),p.removeEventListener("click",U),f.removeEventListener("click",B)}function t(){m.classList.add("visually-hidden"),e()}C.addEventListener("click",t);const o=r=>{!r.composedPath().includes(ie)&&r.composedPath().includes(m)&&(m.classList.add("visually-hidden"),e())};document.addEventListener("click",o);const a=r=>{r.key=="Escape"&&(m.classList.add("visually-hidden"),e())};document.addEventListener("keydown",a);const s=()=>{g.classList.remove("auth-toggler-active"),h.classList.add("auth-toggler-active"),L.classList.remove("visually-hidden"),f.classList.remove("visually-hidden"),p.classList.add("visually-hidden")};h.addEventListener("click",s);const n=()=>{h.classList.remove("auth-toggler-active"),g.classList.add("auth-toggler-active"),L.classList.add("visually-hidden"),f.classList.add("visually-hidden"),p.classList.remove("visually-hidden")};g.addEventListener("click",n);function l(r){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(r).toLowerCase())}const v=async(r,i)=>{ee(r,i).then(()=>{P().then(c=>{w(c.data().name),m.classList.add("visually-hidden"),e()}).catch(c=>{alert(`Get user name error: ${c.code}`)})}).catch(c=>{alert(`Authorization error: ${c.code}`)})},U=()=>{const r=T.value.trim(),i=I.value.trim();l(r)?i.length>=5?v(r,i):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};p.addEventListener("click",U);const D=async(r,i,c)=>{X(r,i).then(()=>{Z(c).then(()=>{w(c),m.classList.add("visually-hidden"),e()}).catch(S=>{alert(`Create account error: ${S.code}`),oe().then(()=>{}).catch(F=>{alert(`Create account error: ${F.code}`)})})}).catch(S=>{alert(`Create account error: ${S.code}`)})},B=()=>{const r=T.value.trim(),i=I.value.trim(),c=L.value.trim();l(r)?i.length>=5?c.length>0&&D(r,i,c):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};f.addEventListener("click",B)}function de(){h.classList.remove(".auth-toggler-active"),g.classList.add(".auth-toggler-active"),L.classList.add("visually-hidden"),f.classList.add("visually-hidden"),p.classList.remove("visually-hidden")}const ue={modalWindow:document.querySelector(".modal-window"),buttonAddToList:document.querySelector(".add-to-list")};function me(e){j(e).then(({book_image:t,title:o,author:a,description:s,buy_links:n})=>{const l=n[0].url,v=n[1].url;console.log(t),console.log(o),console.log(a),console.log(s),console.log(l),console.log(v),ue.modalWindow.innerHTML=he(t,o,a,s,l,v)}).catch(t=>{Notify.failure(`Error: ${t}`)}).finally(()=>{})}function he(e,t,o,a,s,n){return`
    <div class="book-image">
      <img class="img-book-cover" src="${e}" alt="${t}" />
    </div>
    <div>
      <h2 class="book-title">${t}</h2>
      <p class="book-author">${o}</p>
      <p class="book-descr">${a}</p>
    <ul>
      <li>
        <a href="${s}">
        <img src="../images/book-popup/amazon.svg" alt="" />
        </a>
      </li>
      <li>
        <a href="${n}">
        <img src="../images/book-popup/appleBooks.svg" alt="" />
        </a>
      </li>
    </ul>
    </div>
    <button class="add-to-list"></button>
    `}me("643282b2e85766588626a144");const q=document.querySelector("#scrollToTopButton");window.addEventListener("scroll",()=>{window.pageYOffset>500?q.classList.add("show"):q.classList.remove("show")});q.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const E=document.querySelector(".main-categories-list");z().then(e=>{const t=e.data.map(o=>`<li class="main-categories-list-item">${o.list_name}</li>`).join("");E.innerHTML='<li class="main-categories-list-item main-categories-list-item-active">All categories</li>'+t});E.addEventListener("click",e=>{if(e.target.classList.contains("main-categories-list-item")){for(const t of E.children)t.classList.remove("main-categories-list-item-active");e.target.classList.add("main-categories-list-item-active"),e.target.textContent==="All categories"?O().then(t=>{fromTopBlocks(t)}):$(e.target.textContent).then(t=>{fromSelectedBlocks(t,e.target.textContent)})}});const A={categoryTitle:document.querySelector(".js-category-title"),categoryBox:document.querySelector(".js-category-box"),shoppingList:document.querySelector(".js-shopping-list"),emptyPage:document.querySelector(".js-empty-page")};async function ge(e){try{const t=await $(e),o=ye(t),a=pe(e);A.categoryBox.insertAdjacentHTML("afterbegin",o),A.categoryTitle.innerHTML=a}catch(t){console.log(t)}}ge("Hardcover Fiction");A.categoryBox.addEventListener("click",fe);function fe(e){if(e.target===e.currentTarget)return;const o=e.target.closest(".card-wrapper").dataset.id;return console.dir(o),o}function pe(e){const t=e.split(" "),o=Math.ceil(t.length/2),a=t.slice(0,o).join(" "),s=t.slice(o).join(" ");return`
        ${a} <span class="second-half">${s}</span>
    `}function ye(e){return e.map(({author:t,title:o,book_image:a,_id:s})=>`<li class="card-wrapper" data-id="${s}">
                   <div class="book-img">
                      <img src="${a}" alt="${o}">
                   </div>
                   <h2 class="book-title">${o}</h2>
                   <p class="book-author">${t}</p>
                </li>
   `).join("")}const ve=document.querySelector(".main-support-scroll"),b=document.querySelector(".main-support-list");ve.addEventListener("click",()=>{let e=[...b.children].slice(0,1);b.firstChild.remove(),b.appendChild(e[0])});const k=document.querySelector("body"),Le=document.querySelector(".btn"),d=document.querySelector(".btn__icon");function N(e){localStorage.setItem("darkmode",e)}function ke(){const e=localStorage.getItem("darkmode");e?e=="true"?(k.classList.add("darkmode"),d.classList.add("fa-moon")):e=="false"&&d.classList.add("fa-sun"):(N(!1),d.classList.add("fa-sun"))}ke();Le.addEventListener("click",function(){k.classList.toggle("darkmode"),d.classList.add("animated"),N(k.classList.contains("darkmode")),k.classList.contains("darkmode")?(d.classList.remove("fa-sun"),d.classList.add("fa-moon")):(d.classList.remove("fa-moon"),d.classList.add("fa-sun")),setTimeout(function(){d.classList.remove("animated")},500)});
//# sourceMappingURL=theme-dark-light-d09091cc.js.map
