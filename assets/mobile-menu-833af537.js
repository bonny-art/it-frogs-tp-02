import{a as S,i as ye,g as be,b as ke,c as Le,d as ee,s as we,e as Se,f as Ee,h as xe,j as Ae,k as Ie}from"./vendor-369467b0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();const i={categoryTitle:document.querySelector(".js-category-title"),categoryBox:document.querySelector(".js-category-box"),shoppingList:document.querySelector(".js-shopping-list"),emptyPage:document.querySelector(".js-empty-page"),body:document.querySelector("body"),toggleBtn:document.querySelector(".tgl-btn"),toggleIcon:document.querySelector(".tgl-btn__icon"),bookPopup:"",buttonAddToList:""};function $e(){return{bookCollectionWrapper:document.querySelector(".book-collection-wrapper")}}function te(e){localStorage.setItem("darkmode",e)}function qe(){const e=localStorage.getItem("darkmode");e?e=="true"?(i.body.classList.add("darkmode"),i.toggleIcon.classList.add("fa-moon")):e=="false"&&i.toggleIcon.classList.add("fa-sun"):(te(!1),i.toggleIcon.classList.add("fa-sun"))}qe();i.toggleBtn.addEventListener("click",function(){i.body.classList.toggle("darkmode"),i.toggleIcon.classList.add("animated"),te(i.body.classList.contains("darkmode")),i.body.classList.contains("darkmode")?(i.toggleIcon.classList.remove("fa-sun"),i.toggleIcon.classList.add("fa-moon")):(i.toggleIcon.classList.remove("fa-moon"),i.toggleIcon.classList.add("fa-sun")),setTimeout(function(){i.toggleIcon.classList.remove("animated")},500)});S.defaults.baseURL="https://books-backend.p.goit.global/books/";async function oe(){const e=await S.get("category-list").then(t=>t.data);return console.log("список категорій",e),e}oe();async function se(){const e=await S.get("top-books").then(t=>t.data);return console.log("топ 5 в кожній категорії",e),e}se();async function ne(e){const t=await S.get(`category?category=${e}`).then(o=>o.data);return console.log("книги з вибраної категорії",t),t}ne("Childrens Middle Grade Hardcover");async function ie(e){const t=await S.get(`${e}`).then(o=>o.data);return console.log("вибрана книга",t),t}ie("643282b1e85766588626a0dc");const Be={apiKey:"AIzaSyCSIOIvaBcm09OifpCpfKPAwnfy_t377rM",authDomain:"testfirebase-422a2.firebaseapp.com",databaseURL:"https://testfirebase-422a2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"testfirebase-422a2",storageBucket:"testfirebase-422a2.appspot.com",messagingSenderId:"589688307018",appId:"1:589688307018:web:e010a81c7decb75d56d5b3"},ae=ye(Be),re=be(ae),u=ke(ae),Me=async(e,t)=>Se(u,e,t).then(alert("Account created! Welcome!")),Te=async e=>{const t=ee(re,"users",u.currentUser.uid);return Ee(t,{name:e})},Ce=async(e,t)=>xe(u,e,t).then(alert("Welcome back!")),je=async()=>(await u._initializationPromise,u.currentUser!==null),_e=async()=>{const e=u.currentUser;return Ae(e)},ce=async()=>Le(ee(re,"users",u.currentUser.uid));function le(){we(u).then(()=>{alert("Seen later!"),window.location.href="index.html"})}document.addEventListener("DOMContentLoaded",function(){let e=window.location.href;document.querySelectorAll(".nav-item").forEach(function(o){o.querySelector("a").href===e&&o.classList.add("active-page")}),He().then(o=>{let n=document.querySelector(".menu-auth-icon use"),s=document.querySelector(".auth-link"),a=document.querySelector(".sign-out"),c=document.querySelector(".sign-up");o?(n.setAttribute("href","/images/header/header-defs.svg#icon-fi-ss-caret-down-1"),s.classList.remove("visually-hidden"),a.classList.remove("visually-hidden"),c.classList.add("visually-hidden")):(n.setAttribute("href","/images/header/header-defs.svg#icon-arrow-narrow-right-1"),s.classList.add("visually-hidden"),a.classList.add("visually-hidden"),c.classList.remove("visually-hidden"))})});const Ue=document.querySelector(".sign-up"),Pe=document.querySelector(".auth-modal"),Oe=document.querySelector(".user-signed"),Ne=document.querySelector(".menu-auth-logo"),ze=document.querySelector(".sign-out"),de=document.querySelector(".js-logout");async function He(){const e=await je();return e&&ce().then(t=>{C(t.data().name)}),e}Ue.addEventListener("click",()=>{Pe.classList.remove("visually-hidden"),Ge(),Ke()});ze.addEventListener("click",()=>{de.classList.remove("visually-hidden")});de.addEventListener("click",()=>{le()});const C=e=>{Oe.textContent=e,Ne.classList.remove("visually-hidden")},Fe=document.querySelector(".nav-mobile-menu"),K=document.querySelector(".burger use");let M=!1;Fe.addEventListener("click",De);function De(){M=!M,M?(K.setAttribute("href","/images/header/header-defs.svg#icon-close-1"),Re()):(K.setAttribute("href","/images/header/header-defs.svg#icon-burger-1"),We())}function Re(){console.log("Мобильное меню открыто")}function We(){console.log("Мобильное меню закрыто")}const v=document.querySelector(".auth-modal"),G=document.querySelector(".auth-close-btn"),Je=document.querySelector(".auth-container"),y=document.querySelector(".auth-toggler-sign-up"),b=document.querySelector(".auth-toggler-sign-in"),$=document.querySelector("#auth-name"),V=document.querySelector("#auth-email"),Y=document.querySelector("#auth-password"),k=document.querySelector(".auth-sign-up"),L=document.querySelector(".auth-sign-in");document.querySelector("auth-logged-container");function Ke(){function e(){G.removeEventListener("click",t),document.removeEventListener("click",o),document.removeEventListener("keydown",n),y.removeEventListener("click",s),b.removeEventListener("click",a),L.removeEventListener("click",p),k.removeEventListener("click",E)}function t(){v.classList.add("visually-hidden"),e()}G.addEventListener("click",t);const o=r=>{!r.composedPath().includes(Je)&&r.composedPath().includes(v)&&(v.classList.add("visually-hidden"),e())};document.addEventListener("click",o);const n=r=>{r.key=="Escape"&&(v.classList.add("visually-hidden"),e())};document.addEventListener("keydown",n);const s=()=>{b.classList.remove("auth-toggler-active"),y.classList.add("auth-toggler-active"),$.classList.remove("visually-hidden"),k.classList.remove("visually-hidden"),L.classList.add("visually-hidden")};y.addEventListener("click",s);const a=()=>{y.classList.remove("auth-toggler-active"),b.classList.add("auth-toggler-active"),$.classList.add("visually-hidden"),k.classList.add("visually-hidden"),L.classList.remove("visually-hidden")};b.addEventListener("click",a);function c(r){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(r).toLowerCase())}const g=async(r,l)=>{Ce(r,l).then(()=>{ce().then(d=>{C(d.data().name),v.classList.add("visually-hidden"),e(),location.reload()}).catch(d=>{alert(`Get user name error: ${d.code}`)})}).catch(d=>{alert(`Authorization error: ${d.code}`)})},p=()=>{const r=V.value.trim(),l=Y.value.trim();c(r)?l.length>=5?g(r,l):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};L.addEventListener("click",p);const q=async(r,l,d)=>{Me(r,l).then(()=>{Te(d).then(()=>{C(d),v.classList.add("visually-hidden"),e(),location.reload()}).catch(x=>{alert(`Create account error: ${x.code}`),_e().then(()=>{}).catch(B=>{alert(`Create account error: ${B.code}`)})})}).catch(x=>{alert(`Create account error: ${x.code}`)})},E=()=>{const r=V.value.trim(),l=Y.value.trim(),d=$.value.trim();c(r)?l.length>=5?d.length>0&&q(r,l,d):alert("The password must be at least 5 characters long!"):alert("Wrong email!")};k.addEventListener("click",E)}function Ge(){y.classList.remove(".auth-toggler-active"),b.classList.add(".auth-toggler-active"),$.classList.add("visually-hidden"),k.classList.add("visually-hidden"),L.classList.remove("visually-hidden")}let Z=document.getElementById("auth-password"),j=document.querySelector('.auth-input-icon use[href="/images/header/header-defs.svg#icon-lock-1"]'),T=!1;function Ve(){T=!T,T?(Z.type="text",j.setAttribute("href","/images/header/header-defs.svg#icon-lock-unlocked")):(Z.type="password",j.setAttribute("href","/images/header/header-defs.svg#icon-lock-1"))}j.parentNode.addEventListener("click",Ve);console.log("el",i);const ue="booksList";function Ye(e){if(e.target===e.currentTarget)return;const t=e.target.closest(".js-book-on-click");console.log(t);const o=t.dataset.id;console.log("bookId",o),console.log("el.bookPopup"),i.bookPopup,ie(o).then(n=>{const{book_image:s,title:a,author:c,description:g,buy_links:p}=n,q=p[0].url,E=p[1].url,r=H();console.log("localStorage ",r);let l;r.length===0||!r.find(B=>B._id===o)?l="Add to shopping list":l="Remove from the shopping list";const d=Qe(s,a,c,g,q,E,l);Ie.create(`
    <div class="modal-window">${d}</div>    
`).show(),i.buttonAddToList=document.querySelector(".add-to-list"),i.buttonAddToList.addEventListener("click",Xe.bind(n))}).catch(n=>{alert(`Error: ${n}`)}).finally(()=>{})}function Ze(e){const t=H();t.push(e),ge(t)}function H(){try{const e=localStorage.getItem(ue);return e?JSON.parse(e):[]}catch(e){console.log(e.message)}}function ge(e){localStorage.setItem(ue,JSON.stringify(e))}function Qe(e,t,o,n,s,a,c){return`
    <div class="book-image">
      <img class="img-book-cover" src="${e}" alt="${t}" />
    </div>
    <div>
      <h2 class="book-title">${t}</h2>
      <p class="book-author">${o}</p>
      <p class="book-descr">${n}</p>
    <ul>
      <li>
        <a href="${s}">
        <img src="../images/book-popup/amazon.svg" alt="" />
        </a>
      </li>
      <li>
        <a href="${a}">
        <img src="../images/book-popup/appleBooks.svg" alt="" />
        </a>
      </li>
    </ul>
    </div>
    <button class="add-to-list">${c}</button>
    `}const pe=document.querySelector(".aaa");console.log(pe);pe.addEventListener("click",Ye);function Xe(){const e=this;console.log(e),i.buttonAddToList.textContent==="Add to shopping list"?(Ze(e),i.buttonAddToList.textContent="Remove from the shopping list"):(et(e),i.buttonAddToList.textContent="Add to shopping list")}function et({_id:e}){console.log("in remove",e);const o=H().filter(n=>String(n._id)!==e);ge(o)}const _=document.querySelector("#scrollToTopButton");window.addEventListener("scroll",()=>{window.pageYOffset>500?_.classList.add("show"):_.classList.remove("show")});_.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});async function tt(){try{const o=await(await fetch("https://books-backend.p.goit.global/books/top-books")).json();console.log(o);const n=o.map((a,c)=>`
      <div>
        <h3 class="top-title">${a.list_name}</h3>
        <div class="swiper">
          <ul class="list-item swiper-wrapper">
            ${a.books.slice(0,5).map((g,p)=>`
              <li class="li-top js-click-on-book swiper-slide" data-id="${c}-${p}">
                <img class="img-top" src="${g.book_image}" alt="" />
                <p class="top-bookTitle">${g.title}</p>
                <p class="top-bookAuthor">${g.author}</p>
              </li>`).join("")}
          </ul>
        </div>
        <div class="top-button">
          <button class="top-bth top-bth-js" type="submit">see more</button>
        </div>
      </div>`).join(""),s=document.getElementById("list");s.innerHTML=n}catch(t){console.error("Помилка отримання або обробки даних:",t)}document.querySelector(".top-bth-js").addEventListener("click",ot)}function ot(){location.reload()}tt();const me=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"/images/support/save-children@1x.png",img2x:"/images/support/save-children@2x.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"/images/support/hope@1x.png",img2x:"/images/support/hope@2x.png"},{title:"Medicins Sans Frontieres",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"/images/support/medical-corps@1x.png",img2x:"/images/support/medical-corps@2x.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"/images/support/razom@1x.png",img2x:"/images/support/razom@2x.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"/images/support/against-hunger@1x.png",img2x:"/images/support/against-hunger@2x.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"/images/support/prytula@1x.png",img2x:"/images/support/prytula@2x.png"},{title:"International Medical Corps",url:"https://u24.gov.ua/uk",img:"/images/support/sans-frontiers@1x.png",img2x:"/images/support/sans-frontiers@2x.png"},{title:"World vision",url:"https://www.msf.org/ukraine",img:"/images/support/world-vision@1x.png",img2x:"/images/support/world-vision@2x.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"/images/support/united24@1x.png",img2x:"/images/support/united24@2x.png"}];$e();function st(e){return e.map(({id:t,title:o,url:n,img:s,img2x:a})=>`
        <li class="support-items">
            <a class="support-link" href="${n}" target="_blank" rel="noopener noreferrer">
                <span>0${t}</span>
                <img class="support-img" src="${s}" alt="${o}" srcset="${s} 1x, ${a} 2x" height="32">
            </a>
        </li>
        `).join("")}const w=document.querySelector(".js-suport-list"),F=document.querySelector(".support-arrow-down"),D=document.querySelector(".support-arrow-up");F.addEventListener("click",nt);D.addEventListener("click",it);let Q=0;me.forEach(e=>{e.id=Q+1,Q+=1});w.insertAdjacentHTML("afterbegin",st(me));function nt(){F.classList.toggle("visually-hidden"),D.classList.toggle("visually-hidden");for(let e=0;e<3;e+=1)w.children[e].classList.add("visually-hidden");for(let e=7;e<9;e+=1)w.children[e].classList.remove("visually-hidden")}function it(){F.classList.toggle("visually-hidden"),D.classList.toggle("visually-hidden");for(let e=0;e<3;e+=1)w.children[e].classList.remove("visually-hidden");for(let e=7;e<9;e+=1)w.children[e].classList.toggle("visually-hidden")}async function he(e){try{const t=await ne(e),o=ct(t),n=rt(e);i.categoryBox.insertAdjacentHTML("afterbegin",o),i.categoryTitle.innerHTML=n}catch(t){console.log(t)}}he("Hardcover Fiction");i.categoryBox.addEventListener("click",at);function at(e){if(e.target===e.currentTarget)return;const o=e.target.closest(".card-wrapper").dataset.id;return console.dir(o),o}function rt(e){const t=e.split(" "),o=Math.ceil(t.length/2),n=t.slice(0,o).join(" "),s=t.slice(o).join(" ");return`
        ${n} <span class="second-half">${s}</span>
    `}function ct(e){return e.map(({author:t,title:o,book_image:n,_id:s})=>`<li class="card-wrapper" data-id="${s}">
                   <div class="book-img">
                      <img src="${n}" alt="${o}">
                   </div>
                   <h2 class="book-title">${o}</h2>
                   <p class="book-author">${t}</p>
                </li>
   `).join("")}const R=document.querySelector(".main-categories-list");(async()=>{try{const t=(await oe()).data.map(o=>`<li class="main-categories-list-item">${o.list_name}</li>`).join("");R.innerHTML='<li class="main-categories-list-item main-categories-list-item-active">All categories</li>'+t}catch(e){console.error("An error:",e)}})();R.addEventListener("click",lt);async function lt(e){if(e.target.classList.contains("main-categories-list-item")){for(const t of R.children)t.classList.remove("main-categories-list-item-active");e.target.classList.add("main-categories-list-item-active");try{if(e.target.textContent==="All categories"){const t=await se();xxx(t)}else{const t=await he(e.target.textContent);yyy(t,e.target.textContent)}}catch(t){console.error("An error occurred:",t)}}}const X=document.querySelector(".pagination"),dt=document.getElementById("pagination-numbers"),U=document.getElementById("next-button"),P=document.getElementById("prev-button"),O=document.getElementById("to-end-button"),N=document.getElementById("to-start-button");localStorage.removeItem("books-list");function ut(){const e=JSON.parse(localStorage.getItem("booksList"));return e||[]}const h=ut();function gt(){return window.innerWidth<=767?4:3}function pt(e,t){return h?h.slice(e,e+t):[]}const z=gt(),W=Math.ceil(h.length/z);let f;function mt(e){const t=document.createElement("button");t.className="pagination-number",t.innerHTML=e,t.setAttribute("page-index",e),t.setAttribute("aria-label","Page "+e),dt.appendChild(t)}function ht(){for(let e=1;e<=W;e++)mt(e)}function A(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function I(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function ft(){f===1?(A(P),A(N)):(I(P),I(N)),W===f?(A(U),A(O)):(I(U),I(O))}window.addEventListener("load",()=>{ht(),m(1),P.addEventListener("click",()=>{m(f-1)}),U.addEventListener("click",()=>{m(f+1)}),O.addEventListener("click",()=>{m(W)}),N.addEventListener("click",()=>{m(1)}),document.querySelectorAll(".pagination-number").forEach(e=>{const t=Number(e.getAttribute("page-index"));t&&e.addEventListener("click",()=>{m(t)})})});function m(e){f=e,vt(),ft();const t=(e-1)*z,o=e*z,n=pt(t,o);n.length>0||h.length>0?(i.shoppingList.innerHTML="",i.shoppingList.insertAdjacentHTML("afterbegin",yt(n)),i.shoppingList.addEventListener("click",bt),X.classList.remove("hidden")):(i.emptyPage.classList.remove("hidden"),X.classList.add("hidden"))}function vt(){document.querySelectorAll(".pagination-number").forEach(e=>{e.classList.remove("active"),Number(e.getAttribute("page-index"))==f&&e.classList.add("active")})}function yt(e){return e.map(o=>`
            <li class="shopping-book-card" data-book-id="${o._id}">
                <div class="image-thumb">
                <picture>
                  <source srcset="${o.book_image}" type="image/jpg">
                  <img class="shopping-book-cover" srcset="/images/shopping-list-sec/plug_x2.png 2x, /images/shopping-list-sec/plug_x1.png 1x" src="/images/shopping-list-sec/plug_x1.png" alt="plug">
                </picture>
                </div>
                <div class="card-info">
                    <h3 class="shopping-book-title">${o.title}</h3>
                    <p class="shopping-book-category">${o.list_name}</p>
                    <p class="shopping-book-description">${o.description}</p>
                    <p class="shopping-book-author">${o.author}</p>
                </div>
                <button type="button" class="delete-btn js-delete-book">
                    <svg class="delete-svg" width="16" height="16">
                        <use href="/images/shopping-list-sec/sprite.svg#trash"></use>
                    </svg>
                </button>
                <div class="trade-fairs">
                  <a href="${o.buy_links[0].url}" target="_blank">
                    <img class="amazon-img" src="/images/shopping-list-sec/amazon.svg" width="32" height="11"/>
                  </a>
                  <a href="${o.buy_links[1].url}" target="_blank">
                    <img class="apple-books-img" src="/images/shopping-list-sec/appleBooks.svg" width="16" height="16"/>
                  </a>
                </div>
            </li>
`).join("")}function bt(e){if(!e.target.parentNode.classList.contains("js-delete-book"))return;const t=e.target.closest(".shopping-book-card"),o=t.dataset.bookId,n=h.findIndex(s=>s._id===o);n!=-1&&(console.log(n),h.splice(n,1),localStorage.setItem("booksList",JSON.stringify(h)),t.remove(),m(f))}const fe=document.getElementById("open-mobile-menu"),J=document.querySelector(".js-mobile-menu"),ve=document.querySelector(".button-home"),kt=document.querySelector(".button-shopping-list"),Lt=document.querySelector(".button-log-out");console.log(fe);console.log(J);console.log(ve);fe.addEventListener("click",wt);ve.addEventListener("click",St);kt.addEventListener("click",Et);Lt.addEventListener("click",xt);function wt(e){J.style.display="block"}function St(e){window.location.href="/index.html",J.style.display="none"}function Et(e){window.location.href="shopping-list.html"}function xt(e){le(),window.location.href="/index.html"}
//# sourceMappingURL=mobile-menu-833af537.js.map
